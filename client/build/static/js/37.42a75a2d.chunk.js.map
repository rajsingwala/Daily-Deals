{"version":3,"sources":["pages/Cart.js","functions/cart.js"],"names":["Cart","useState","product","setProduct","productCart","useSelector","selectCart","userEmail","selectUserEmail","token","selectUserToken","loading","setLoading","loading2","setLoading2","history","useHistory","dispatch","useDispatch","useEffect","myDate","Date","getTime","toString","className","style","paddingTop","length","map","p","src","images","url","alt","title","type","value","count","onChange","e","pro","target","quantity","toast","error","cart","window","localStorage","getItem","JSON","parse","i","_id","setItem","stringify","setCart","handleCount","color","brand","backgroundColor","fontWeight","numeral","price","format","onClick","splice","handleRemove","slice","shipping","to","marginTop","marginLeft","reduce","n","push","pathname","state","from","proceedCheckout","then","res","console","log","data","ok","setCod","cod","catch","err","authtoken","a","axios","post","headers","getCart","get","removeCart","delete","userAddress","address","userData"],"mappings":"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","file":"static/js/37.42a75a2d.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectUserEmail, selectUserToken } from \"../features/user/userSlice\";\r\nimport { selectCart, setCart } from \"../features/cart/cartSlice\";\r\nimport { AiOutlineCheckCircle, AiOutlineCloseCircle } from \"react-icons/ai\";\r\nimport { proceedCheckout } from \"../functions/cart\";\r\nimport numeral from \"numeral\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button } from \"antd\";\r\nimport { setCod } from \"../features/cart/codSlice\";\r\n\r\nconst Cart = () => {\r\n  const [product, setProduct] = useState([]);\r\n  const productCart = useSelector(selectCart);\r\n  const userEmail = useSelector(selectUserEmail);\r\n  const token = useSelector(selectUserToken);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loading2, setLoading2] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setProduct(productCart);\r\n  }, [productCart]);\r\n\r\n  var myDate = new Date(\r\n    new Date().getTime() + 7 * 24 * 60 * 60 * 1000\r\n  ).toString();\r\n\r\n  const handleCheckout = () => {\r\n    history.push({\r\n      pathname: \"/login\",\r\n      state: { from: \"/cart\" },\r\n    });\r\n  };\r\n\r\n  const getTotal = () => {\r\n    return product.reduce((p, n) => {\r\n      return p + n.price * n.count;\r\n    }, 0);\r\n  };\r\n\r\n  const handleCount = (pro, e) => {\r\n    let count = e.target.value < 1 ? 1 : e.target.value;\r\n\r\n    if (count > pro.quantity) {\r\n      toast.error(`Max available quantity: ${pro.quantity}`);\r\n      return;\r\n    }\r\n\r\n    let cart = [];\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n\r\n      cart.map((product, i) => {\r\n        if (product._id === pro._id) {\r\n          cart[i].count = count;\r\n        }\r\n      });\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n\r\n      dispatch(\r\n        setCart({\r\n          cart: cart,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleRemove = (pro) => {\r\n    let cart = [];\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n\r\n      cart.map((product, i) => {\r\n        if (product._id === pro) {\r\n          cart.splice(i, 1);\r\n        }\r\n      });\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n      dispatch(\r\n        setCart({\r\n          cart: cart,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleProceedCheckout = () => {\r\n    setLoading(true);\r\n    proceedCheckout(productCart, token)\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.data.ok) history.push(\"/checkout\");\r\n        setLoading(false);\r\n        dispatch(setCod({ cod: false }));\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const handleCash = () => {\r\n    setLoading2(true);\r\n    proceedCheckout(productCart, token)\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.data.ok) history.push(\"/checkout\");\r\n        setLoading2(false);\r\n        dispatch(setCod({ cod: true }));\r\n      })\r\n      .catch((err) => {\r\n        setLoading2(false);\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"product_cart_page\">\r\n      <div className=\"product_cart_container\">\r\n        {/*********************left********************/}\r\n        <div className=\"product_cart_left\">\r\n          <div className=\"product_cart_title\">\r\n            <h2 style={{ paddingTop: \"0.1rem\" }}>\r\n              My Cart{\" \"}\r\n              <span>\r\n                {product && product.length > 0 ? `(${product.length})` : \"(0)\"}\r\n              </span>\r\n            </h2>\r\n          </div>\r\n          <div className=\"cart_hr\" />\r\n          {/****************left-mid***************/}\r\n          {product && product.length > 0 ? (\r\n            product.map((p) => (\r\n              <>\r\n                <div className=\"product_cart_mid\" key={p._id}>\r\n                  <div className=\"product_cart_mid_left\">\r\n                    <div className=\"product_cart_mid_left_img\">\r\n                      <img src={p.images[0].url} alt={p.title} />\r\n                    </div>\r\n                    <div className=\"product_cart_mid_left_counter\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={p.count}\r\n                        onChange={(e) => handleCount(p, e)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"product_cart_mid_mid\">\r\n                    <div className=\"product_cart_mid_mid_title\">\r\n                      <h3>{p.title}</h3>\r\n                    </div>\r\n                    <div className=\"product_cart_mid_mid_brand\">\r\n                      <h4 style={{ color: \"gray\" }}>{p.brand}</h4>\r\n                    </div>\r\n                    <div className=\"product_cart_mid_mid_color\">\r\n                      <div\r\n                        style={{ backgroundColor: p.color }}\r\n                        className=\"product_cart_mid_mid_color_circle\"\r\n                      />\r\n                      <h4 style={{ color: p.color }}>{p.color}</h4>\r\n                    </div>\r\n                    <div className=\"product_cart_mid_mid_price\">\r\n                      <h4 style={{ fontWeight: \"bold\" }}>\r\n                        ₹{numeral(p.price).format(\"0,0\")}\r\n                      </h4>\r\n                    </div>\r\n                    <div className=\"product_cart_mid_mid_remove\">\r\n                      <button\r\n                        className=\"product_cart_mid_mid_remove_btn\"\r\n                        onClick={() => handleRemove(p._id)}\r\n                      >\r\n                        REMOVE\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/*******mid-right*****/}\r\n                  <div className=\"product_cart_mid_right\">\r\n                    <div className=\"product_cart_mid_right_arrive\">\r\n                      <h4>Delivery by {myDate.slice(0, 10)} </h4>\r\n                    </div>\r\n                    <div className=\"product_cart_mid_right_replacement\">\r\n                      <h5 style={{ color: \"gray\" }}>\r\n                        {\" \"}\r\n                        7 Days Replacement Policy\r\n                      </h5>\r\n                    </div>\r\n                    <div className=\"product_cart_mid_shipping\">\r\n                      <h3>Shipping </h3>\r\n                      {p.shipping === \"Yes\" ? (\r\n                        <AiOutlineCheckCircle className=\"product_cart_mid_shipping_check\" />\r\n                      ) : (\r\n                        <AiOutlineCloseCircle className=\"product_cart_mid_shipping_uncheck\" />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"cart_hr\" />{\" \"}\r\n              </>\r\n            ))\r\n          ) : (\r\n            <div className=\"cart_no_product\">\r\n              <h2>No Products In Cart</h2>\r\n              <Link\r\n                to=\"/shop\"\r\n                style={{ marginTop: \"0.4rem\", marginLeft: \"0.5rem\" }}\r\n              >\r\n                Go For Shopping\r\n              </Link>\r\n            </div>\r\n          )}{\" \"}\r\n        </div>\r\n        {/**********************right******************/}\r\n        {product && product.length > 0 ? (\r\n          <div className=\"product_cart_right\">\r\n            <div className=\"product_cart_title\">\r\n              <h2 style={{ paddingTop: \"0.1rem\" }}>ORDER SUMMARY</h2>\r\n            </div>\r\n            <div className=\"cart_hr_right\" />\r\n            <div className=\"product_cart_right_mid\">\r\n              {product && product.length > 0\r\n                ? product.map((p) => (\r\n                    <>\r\n                      <div\r\n                        className=\"product_cart_right_mid_content\"\r\n                        key={p._id}\r\n                      >\r\n                        <h4>\r\n                          {p.title} ({p.color}) X {p.count} = ₹\r\n                          {numeral(p.price * p.count).format(\"0,0\")}{\" \"}\r\n                        </h4>\r\n                      </div>\r\n                    </>\r\n                  ))\r\n                : null}\r\n            </div>\r\n            <div className=\"cart_hr_right\" />\r\n            <div className=\"product_cart_right_bottom\">\r\n              <h3 style={{ marginTop: \"0.45rem\" }}>\r\n                TOTAL : ₹{numeral(getTotal()).format(\"0,0\")}\r\n              </h3>\r\n            </div>\r\n            <div className=\"cart_hr_right\" />\r\n\r\n            {/*********************left-order=bottom********************/}\r\n\r\n            <div className=\"product_cart_bottom\">\r\n              {userEmail === null ? (\r\n                <button\r\n                  className=\"product_cart_bottom_order\"\r\n                  onClick={handleCheckout}\r\n                >\r\n                  Login For Checkout\r\n                </button>\r\n              ) : (\r\n                <>\r\n                  {\" \"}\r\n                  <Button\r\n                    className={\r\n                      loading2\r\n                        ? \"product_cart_bottom_cash_loading\"\r\n                        : \"product_cart_bottom_cash\"\r\n                    }\r\n                    onClick={handleCash}\r\n                    loading={loading2}\r\n                  >\r\n                    Pay Cash On Delivery\r\n                  </Button>\r\n                  <Button\r\n                    className={\r\n                      loading\r\n                        ? \"product_cart_bottom_order_loading\"\r\n                        : \"product_cart_bottom_order\"\r\n                    }\r\n                    onClick={handleProceedCheckout}\r\n                    loading={loading}\r\n                  >\r\n                    Proceed To Checkout\r\n                  </Button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : null}{\" \"}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import axios from \"axios\";\r\n\r\nexport const proceedCheckout = async (productCart, authtoken) =>\r\n  await axios.post(\r\n    `/user/checkout`,\r\n    { cart: productCart },\r\n    { headers: { authtoken } }\r\n  );\r\n\r\nexport const getCart = async (authtoken) =>\r\n  await axios.get(`/user/checkout/get`, {\r\n    headers: { authtoken },\r\n  });\r\n\r\nexport const removeCart = async (authtoken) =>\r\n  await axios.delete(`/user/checkout/empty`, {\r\n    headers: { authtoken },\r\n  });\r\n\r\nexport const userAddress = async (address, authtoken) =>\r\n  await axios.post(`/user/address`, address, {\r\n    headers: { authtoken },\r\n  });\r\n\r\nexport const userData = async (authtoken) =>\r\n  await axios.post(\r\n    `/current-user`,\r\n    {},\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n"],"sourceRoot":""}